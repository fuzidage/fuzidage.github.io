<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>uboot-menuconfig和Kconfig图像化配置 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="1 ncurses 库安装 2 menuconfig菜单使用说明和举例 3 menuconfig 图形化配置原理 3.1 make menuconfig 过程 3.1.1 Kconfig 语法简介 3.1.1.1 mainmenu 3.1.1.2 子Kconfig 3.1.1.3 menu&#x2F;endmenu 菜单 3.1.1.4 config条目 3.1.1.5 depends">
<meta property="og:type" content="article">
<meta property="og:title" content="uboot-menuconfig和Kconfig图像化配置">
<meta property="og:url" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="1 ncurses 库安装 2 menuconfig菜单使用说明和举例 3 menuconfig 图形化配置原理 3.1 make menuconfig 过程 3.1.1 Kconfig 语法简介 3.1.1.1 mainmenu 3.1.1.2 子Kconfig 3.1.1.3 menu&#x2F;endmenu 菜单 3.1.1.4 config条目 3.1.1.5 depends">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/1.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/2.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/3.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/4.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/5.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/6.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/7.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/8.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/9.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/10.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/11.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/12.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/13.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/14.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/15.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/16.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/17.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/18.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/19.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/20.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/21.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/22.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/23.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/24.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/25.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/26.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/27.png">
<meta property="og:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/28.png">
<meta property="article:published_time" content="2024-06-23T14:14:48.000Z">
<meta property="article:modified_time" content="2024-06-23T14:38:02.000Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="linux系统构建">
<meta property="article:tag" content="boot启动">
<meta property="article:tag" content="uboot">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/1.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.1.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-uboot-menuconfig和Kconfig图像化配置" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/" class="article-date">
  <time class="dt-published" datetime="2024-06-23T14:14:48.000Z" itemprop="datePublished">2024-06-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      uboot-menuconfig和Kconfig图像化配置
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <div class="toc">

<!-- toc -->

<ul>
<li><a href="#1-ncurses-ku-an-zhuang">1 ncurses 库安装</a></li>
<li><a href="#2-menuconfig-cai-dan-shi-yong-shuo-ming-he-ju-li">2 menuconfig菜单使用说明和举例</a></li>
<li><a href="#3-menuconfig-tu-xing-hua-pei-zhi-yuan-li">3 menuconfig 图形化配置原理</a><ul>
<li><a href="#3-1-make-menuconfig-guo-cheng">3.1 make menuconfig 过程</a><ul>
<li><a href="#3-1-1-kconfig-yu-fa-jian-jie">3.1.1 Kconfig 语法简介</a><ul>
<li><a href="#3-1-1-1-mainmenu">3.1.1.1 mainmenu</a></li>
<li><a href="#3-1-1-2-zi-kconfig">3.1.1.2 子Kconfig</a></li>
<li><a href="#3-1-1-3-menu-endmenu-cai-dan">3.1.1.3 menu&#x2F;endmenu 菜单</a></li>
<li><a href="#3-1-1-4-config-tiao-mu">3.1.1.4 config条目</a></li>
<li><a href="#3-1-1-5-depends-on-he-select">3.1.1.5 depends on 和 select</a></li>
<li><a href="#3-1-1-6-choice-endchoice">3.1.1.6 choice&#x2F;endchoice</a></li>
<li><a href="#3-1-1-7-menuconfig">3.1.1.7 menuconfig</a></li>
<li><a href="#3-1-1-8-comment">3.1.1.8 comment</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#4-menuconfig-cai-dan-shi-zhan-lian-xi">4 menuconfig菜单实战练习</a></li>
</ul>
<!-- tocstop -->

</div>

<h1><span id="1-ncurses-ku-an-zhuang">1 ncurses 库安装</span><a href="#1-ncurses-ku-an-zhuang" class="header-anchor">#</a></h1><p>uboot 或 Linux 内核可以通过输入<code>make menuconfig</code>来打开图形化配置界面，<code>menuconfig</code>是一套图形化的配置工具，需要<code>ncurses</code>库支持。<br><code>sudo apt-get install build-essential</code><br><code>sudo apt-get install libncurses5-dev</code></p>
<h1><span id="2-menuconfig-cai-dan-shi-yong-shuo-ming-he-ju-li">2 menuconfig菜单使用说明和举例</span><a href="#2-menuconfig-cai-dan-shi-yong-shuo-ming-he-ju-li" class="header-anchor">#</a></h1><p><code>menuconfig </code>重点会用到两个文件：<code>.config </code>和 <code>Kconfig</code>，<code>.config </code>文件前面已经说了，这个文件保存着 uboot 的配置项，使用 <code>menuconfig </code>配置完 uboot 以后会更新<code>.config </code>文件。<code>Kconfig</code>文件是图形界面的描述文件，也就是描述界面应该有什么内容，很多目录下都会有<code>Kconfig</code>文件。<br><code>make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- mx6ull_alientek_emmc_defconfig</code><br><code>make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- menuconfig</code><br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/1.png" alt="image"><br>通过键盘上的<code>“↑”</code>和<code>“↓”</code>键来选择要配置的菜单，按下<code>“Enter”</code>键进入子菜单。菜单中高亮的字母就是此菜单的热键，在键盘上按下此高亮字母对应的键可以快速选中对应的菜单。选中子菜单以后按下<code>“Y”</code>键就会将相应的代码编译进 Uboot 中，菜单前面变为<code>“&lt; * &gt;”</code>。按下<code>“N”</code>键不编译相应的代码，按下<code>“M”</code>键就会将相应的代码编译为模块，菜单前面变为<code>“&lt; M &gt;”</code>。按两下<code>“Esc”</code>键退出，也就是返回到上一级，按下<code>“?”</code>键查看此菜单的帮助信息，按下<code>“/”</code>键打开搜索框，可以在搜索框输入要搜索的内容。<br>在配置界面下方会有五个按钮，这五个按钮的功能如下：</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Select&gt;：选中按钮，和“Enter”键的功能相同，负责选中并进入某个菜单。</span><br><span class="line">&lt;Exit&gt;：退出按钮，和按两下“Esc”键功能相同，退出当前菜单，返回到上一级。</span><br><span class="line">&lt;Help&gt;：帮助按钮，查看选中菜单的帮助信息。</span><br><span class="line">&lt;Save&gt;：保存按钮，保存修改后的配置文件。</span><br><span class="line">&lt;Load&gt;：加载按钮，加载指定的配置文件。</span><br></pre></td></tr></table></figure>
<p>就以如何使能<code>dns</code>命令为例，讲解一下如何通过图形化界面来配置 uboot。进入<code>“Command line interface ---&gt;”</code>这个配置项:<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/2.png" alt="image"><br>选择<code>“Network commands ---&gt;”</code>，进入网络相关命令配置项:<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/3.png" alt="image"><br>可以看出，uboot 中有很多和网络有关的命令，比如<code>bootp、tftpboot、dhcp</code>等等。选中<code> dns</code>，然后按下键盘上的<code>“Y”</code>键，此时<code>dns</code>前面的<code>“[ ]”</code>变成了<code>“[ * ]” </code>:<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/4.png" alt="image"><br>细心的朋友应该会发现，在<code>mx6ull_alientek_emmc.h</code>里面我们配置使能了<code> dhcp</code> 和<code>ping</code>命令，但是在上图中的<code>“[ ]”</code>并不是<code>“[ * ]”</code>，也就是说不编译<code>dhcp</code>和 <code>ping</code>命令，这不是冲突了吗？实际情况是<code> dhcp</code> 和<code> ping</code> 命令是会编译的。之所以在上图中没有体现出来时因为我们是直接在<code>mx6ull_alientek_emmc.h</code>中定义的宏<code>CONFIG_CMD_PING</code>和<code>CONFIG_CMD_DHCP</code>，而<code> menuconfig</code> 是通过读取<code>.config </code>文件来判断使能了哪些功能，<code>.config</code>里面并没有宏<code>CONFIG_CMD_PING</code>和<code>CONFIG_CMD_DHCP</code>,因此<code>menuconfig</code>不会选中这两项。<br>总结下：配置选项来自2个地方，一个是<code>mx6ull_alientek_emmc.h</code>，一个是<code>.config</code><br>选中<code> dns</code>，然后按下<code>“H”</code>或者<code>“?”</code>键可以打开<code>dns</code>命令的帮助提示信息：<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/5.png" alt="image"><br>选择<code>dns</code>命令以后，按两下 <code>ESC </code>键（按两下<code>ESC</code>键相当于返回上一层），退出当前配置项，进入到上一层配置项，输入<code>Y</code>保存修改后的配置到<code>.config</code>。<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/6.png" alt="image"><br>再打开<code>.config</code>，会发现多了<code>“CONFIG_CMD_DNS=y”</code>这一行：<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/7.png" alt="image"><br>再次编译：<br><code>make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- -j16</code><br>烧录uboot进sd卡，开机从sd卡启动,进入uboot命令行后，输入<code>help或者?</code>就可以看到uboot支持了dns命令。<br>测试：先将板子连接能上外网的路由器，要先设置一下<code>dns</code>服务器的 IP 地址，也就是设置环境变量 <code>dnsip </code>的值：<br><code>setenv dnsip 114.114.114.114</code><br><code>saveenv</code><br>设置好以后就可以使用 dns 命令查看百度官网的 IP 地址了:<br><code>dns www.baidu.com</code><br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/8.png" alt="image"><br>可以看到dns解析命令功能正常。</p>
<h1><span id="3-menuconfig-tu-xing-hua-pei-zhi-yuan-li">3 menuconfig 图形化配置原理</span><a href="#3-menuconfig-tu-xing-hua-pei-zhi-yuan-li" class="header-anchor">#</a></h1><h2><span id="3-1-make-menuconfig-guo-cheng">3.1 make menuconfig 过程</span><a href="#3-1-make-menuconfig-guo-cheng" class="header-anchor">#</a></h2><p>同<code>defconfig</code>一样，<code>make menuconfig</code> 也会匹配到顶层<code> Makefile。</code> </p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/fuzidage/p/17859528.html">Uboot顶层Makefile解析-1. defconfig过程分析 - fuzidage - 博客园 (cnblogs.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://fuzidage.github.io/2024/06/22/uboot-%E7%BC%96%E8%AF%91defconfig%E5%88%86%E6%9E%90/">uboot-编译defconfig分析 | Hexo (fuzidage.github.io)</a></p>
<p><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/9.png" alt="image"><br>其中 <code>build=-f ./scripts/Makefile.build obj</code>, 展开后：<br><code>make -f ./scripts/Makefile.build obj=scripts/kconfig menuconfig</code><br><code>Makefile.build </code>会读取<code>scripts/kconfig/Makefile</code>中的内容，在<code>scripts/kconfig/Makefile</code>中可以找到如下代码：<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/10.png" alt="image"><br>其中<code>obj= scripts/kconfig</code>，<code>silent</code>是设置静默编译的，在这里可以忽略不计，<code>Kconfig=Kconfig</code>，因此扩展以后就是：<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/11.png" alt="image"><br><code>scripts/kconfig/mconf.c </code>这个文件会被编译，生成 <code>mconf </code>这个可执行文件。<code>mconf </code>会调用 uboot 根目录下的 <code>Kconfig </code>文件开始构建图形配置界面。</p>
<h3><span id="3-1-1-kconfig-yu-fa-jian-jie">3.1.1 Kconfig 语法简介</span><a href="#3-1-1-kconfig-yu-fa-jian-jie" class="header-anchor">#</a></h3><h4><span id="3-1-1-1-mainmenu">3.1.1.1 mainmenu</span><a href="#3-1-1-1-mainmenu" class="header-anchor">#</a></h4><p>输入<code>make menuconfig</code>以后打开的默认界面就是<code>mainmenu</code>，在顶层<code> Kconfig</code> 中有如下代码：<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/12.png" alt="image"><br>我们的uboot是<code>UBOOTVERSION=2016.03</code>，如下：<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/13.png" alt="image"></p>
<h4><span id="3-1-1-2-zi-kconfig">3.1.1.2 子Kconfig</span><a href="#3-1-1-2-zi-kconfig" class="header-anchor">#</a></h4><p><code>Kconfig </code>也可以调用其他子目录中的<code>Kconfig</code>文件，调用方法如下:<br><code>source &quot;xxx/Kconfig&quot;</code><br>顶层<code>Kconfig</code>中，调用了很多子<code>Kconfig</code>:<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/14.png" alt="image"></p>
<h4><span id="3-1-1-3-menu-x2f-endmenu-cai-dan">3.1.1.3 menu&#x2F;endmenu 菜单</span><a href="#3-1-1-3-menu-x2f-endmenu-cai-dan" class="header-anchor">#</a></h4><p><code>menu </code>用于生成菜单，<code>endmenu </code>就是菜单结束标志。在顶层<code>Kconfig </code>中有如下代码：<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/15.png" alt="image"><br>体现在主菜单界面如下所示：<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/16.png" alt="image"><br>在<code>“General setup”</code>菜单上面还有 <code>“Architecture select (ARM architecture)”</code>和<code>“ARM architecture”</code>这两个子菜单，但是在顶层 <code>Kconfig </code>中并没有看到这两个子菜单对应的<code>menu/endmenu </code>代码块，那这两个子菜单是怎么来的呢？这两个子菜单就是<code>arch/Kconfig</code>文件生成的。包括主界面中的<code>“Boot timing”、“Console recording”</code>等等这些子菜单，都是分别由顶层<code>Kconfig </code>所调用的 <code>common/Kconfig、cmd/Kconfig</code> 等这些子<code>Kconfig</code>文件来创建的。</p>
<h4><span id="3-1-1-4-config-tiao-mu">3.1.1.4 config条目</span><a href="#3-1-1-4-config-tiao-mu" class="header-anchor">#</a></h4><p>顶层<code>Kconfig</code>中的<code>“General setup”</code>子菜单内容如下：</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">14 menu <span class="string">&quot;General setup&quot;</span></span><br><span class="line">15</span><br><span class="line">16 config LOCALVERSION</span><br><span class="line">17 string <span class="string">&quot;Local version - append to U-Boot release&quot;</span></span><br><span class="line">18 help</span><br><span class="line">19 Append an extra string to the end of your U-Boot version.</span><br><span class="line">20 This will show up on your boot log, for example.</span><br><span class="line">21 The string you set here will be appended after the contents of</span><br><span class="line">22 any files with a filename matching localversion* in your</span><br><span class="line">23 object and source tree, in that order. Your total string can</span><br><span class="line">24 be a maximum of 64 characters.</span><br><span class="line">25 </span><br><span class="line">26 config LOCALVERSION_AUTO</span><br><span class="line">27 bool <span class="string">&quot;Automatically append version information to the version </span></span><br><span class="line"><span class="string">string&quot;</span></span><br><span class="line">28 default y</span><br><span class="line">29 help</span><br><span class="line">......</span><br><span class="line">45 </span><br><span class="line">46 config CC_OPTIMIZE_FOR_SIZE</span><br><span class="line">47 bool <span class="string">&quot;Optimize for size&quot;</span></span><br><span class="line">48 default y</span><br><span class="line">49 help</span><br><span class="line">......</span><br><span class="line">54 </span><br><span class="line">55 config SYS_MALLOC_F</span><br><span class="line">56 bool <span class="string">&quot;Enable malloc() pool before relocation&quot;</span></span><br><span class="line">57 default y if DM</span><br><span class="line">58 help</span><br><span class="line">......</span><br><span class="line">63 </span><br><span class="line">64 config SYS_MALLOC_F_LEN</span><br><span class="line">65 hex <span class="string">&quot;Size of malloc() pool before relocation&quot;</span></span><br><span class="line">66 depends on SYS_MALLOC_F</span><br><span class="line">67 default 0x400</span><br><span class="line">68 help</span><br><span class="line">......</span><br><span class="line">73 </span><br><span class="line">74 menuconfig EXPERT</span><br><span class="line">75 bool <span class="string">&quot;Configure standard U-Boot features (expert users)&quot;</span></span><br><span class="line">76 default y</span><br><span class="line">77 help</span><br><span class="line">......</span><br><span class="line">82 </span><br><span class="line">83 if EXPERT</span><br><span class="line">84 config SYS_MALLOC_CLEAR_ON_INIT</span><br><span class="line">85 bool <span class="string">&quot;Init with zeros the memory reserved for malloc (slow)&quot;</span></span><br><span class="line">86 default y</span><br><span class="line">87 help</span><br><span class="line">......</span><br><span class="line">99 <span class="keyword">endif</span></span><br><span class="line">100 endmenu <span class="comment"># General setup</span></span><br></pre></td></tr></table></figure>
<p>可以看到有大量的<code>“config xxxx”</code>的代码块，也就是<code>config</code>条目。<code>“General setup”</code>菜单的<code>config</code>条目具体配置项如下：<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/17.png" alt="image"><br><code>“config LOCALVERSION”</code>对应着第一个配置项，<code>“config LOCALVERSION_AUTO”</code>对应着 第 二 个 配 置 项。</p>
<p>① 第 16 和 26 行，这两行都以 <code>config </code>关键字开头，后面跟着 <code>LOCALVERSION </code>和<code>LOCALVERSION_AUTO</code>，这两个就是配置项名字。假如我们使能了<code> LOCALVERSION_AUTO</code>这个功能，那么就会下<code>.config</code> 文件中生成 <code>CONFIG_LOCALVERSION_AUTO</code>。</p>
<p>②<code>config</code>关键字下面的这几行是配置项属性，17<del>24 行是<code> LOCALVERSION</code> 的属性，27</del>44 行是<code> LOCALVERSION_AUTO</code> 的属性。</p>
<p>③ 属性里面描述了配置项的类型、输入提示、依赖关系、帮助信息和默认值等。第 17 行的<code>string</code>是变量类型，也就<code>“CONFIG_ LOCALVERSION”</code>的变量类型。可以为：<code>bool、tristate、string、hex 和 int</code>，一共 5 种。最常用的是 <code>bool、tristate 和 string </code>这三种，<code>bool </code>类型有两种值：<code>y 和 n</code>，当为 y 的时候表示使能这个配置项，当为 n 的时候就禁止这个配置项。<code>tristate </code>类型有三种值：<code>y、m 和 n</code>，其中 y 和 n 的涵义与 bool 类型一样，m 表示将这个配置项编译为模块。<code>string </code>为字符串类型，所以 <code>LOCALVERSION </code>是个字符串变量，用来存储本地字符串，选中以后即可输入用户定义的本地版本号，如下图：<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/18.png" alt="image"></p>
<p><code>string </code>后面的<code>“Local version - append to U-Boot release”</code>就是这个配置项在图形界面上的显示出来的标题。<br>④ 第 18 行，<code>help </code>表示帮助信息，告诉我们配置项的含义，当我们按下<code>“h”或“?”</code>弹出来的帮助界面就是 <code>help </code>的内容。<br>⑤ 第 27 行，说明<code>“CONFIG_LOCALVERSION_AUTO”</code>是个<code>bool </code>类型，可以通过按下 Y 或N 键来使能或者禁止 <code>CONFIG_LOCALVERSION_AUTO</code>。<br>⑥ 第 28 行，<code>“default y”</code>表示 <code>CONFIG_LOCALVERSION_AUTO </code>的默认值就是 y，所以这一行默认会被选中。</p>
<h4><span id="3-1-1-5-depends-on-he-select">3.1.1.5 depends on 和 select</span><a href="#3-1-1-5-depends-on-he-select" class="header-anchor">#</a></h4><p>打开 <code>arch/Kconfig </code>文件，在里面有这如下代码：<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/19.png" alt="image"><br>第 9 行，<code>“depends on”</code>说明<code>“SYS_GENERIC_BOARD”</code>项依赖于<code>“HAVE_GENERIC_BOARD”</code>,也就是说<code>“HAVE_GENERIC_BOARD”</code>被选中以后<code>“SYS_GENERIC_BOARD”</code>才能被选中。<br>第 17~20 行，<code>“select”</code>表示方向依赖，当选中<code>“ARC”</code>以后，<code>“HAVE_PRIVATE_LIBGCC”、“HAVE_GENERIC_BOARD”、“SYS_GENERIC_BOARD”和“SUPPORT_OF_CONTROL”</code>这四个也会被选中。</p>
<h4><span id="3-1-1-6-choice-x2f-endchoice">3.1.1.6 choice&#x2F;endchoice</span><a href="#3-1-1-6-choice-x2f-endchoice" class="header-anchor">#</a></h4><p>在<code>arch/Kconfig</code>文件中有如下代码：</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">11 choice</span><br><span class="line">12 prompt <span class="string">&quot;Architecture select&quot;</span></span><br><span class="line">13 default SANDBOX</span><br><span class="line">14 </span><br><span class="line">15 config ARC</span><br><span class="line">16 bool <span class="string">&quot;ARC architecture&quot;</span></span><br><span class="line">......</span><br><span class="line">21 </span><br><span class="line">22 config ARM</span><br><span class="line">23 bool <span class="string">&quot;ARM architecture&quot;</span></span><br><span class="line">......</span><br><span class="line">29 </span><br><span class="line">30 config AVR32</span><br><span class="line">31 bool <span class="string">&quot;AVR32 architecture&quot;</span></span><br><span class="line">......</span><br><span class="line">35 </span><br><span class="line">36 config BLACKFIN</span><br><span class="line">37 bool <span class="string">&quot;Blackfin architecture&quot;</span></span><br><span class="line">......</span><br><span class="line">40 </span><br><span class="line">41 config M68K</span><br><span class="line">42 bool <span class="string">&quot;M68000 architecture&quot;</span></span><br><span class="line">......</span><br><span class="line">117</span><br><span class="line">118 endchoice</span><br></pre></td></tr></table></figure>

<p><code>choice/endchoice </code>代码段定义了一组可选择项，将多个类似的配置项组合在一起，供用户单选或者多选。该示例就是选择处理器架构，可以从<code>ARC、ARM、AVR32</code>等这些架构中选择，这里是单选。在 uboot 图形配置界面上选择<code>“Architecture select”</code>，进入以后如下图：<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/20.png" alt="image"><br>第 12 行的<code>prompt</code>给出这个<code>choice/endchoice </code>段的提示信息为<code>“Architecture select”</code>。</p>
<h4><span id="3-1-1-7-menuconfig">3.1.1.7 menuconfig</span><a href="#3-1-1-7-menuconfig" class="header-anchor">#</a></h4><p><code>menuconfig 和 menu </code>很类似，但是 <code>menuconfig </code>是个<strong>带选项的菜单</strong>,如顶层<code>Kconfig</code>中的<code>“General setup”</code>中的列表中有一项<code>menuconfig EXPERT</code>：<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/21.png" alt="image"><br>结果如下：<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/22.png" alt="image"><br>可以看到，前面有<code>“[ ]”</code>说明这个<strong>菜单是可选的</strong>，当选中这个菜单以后就可以进入到子选项中：<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/23.png" alt="image"><br>如果不选择<code>“Configure standard U-Boot features (expert users)”</code>，那么所描述的菜单就不会显示出来，进去以后是空白的。</p>
<h4><span id="3-1-1-8-comment">3.1.1.8 comment</span><a href="#3-1-1-8-comment" class="header-anchor">#</a></h4><p><code>comment</code>用于注释， 也就是在图形化界面中显示一行注释。例如<code>drivers/mtd/nand/Kconfig</code>中：</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">74 config NAND_ARASAN</span><br><span class="line">75 bool <span class="string">&quot;Configure Arasan Nand&quot;</span></span><br><span class="line">76 help</span><br><span class="line">......</span><br><span class="line">80</span><br><span class="line">81 comment <span class="string">&quot;Generic NAND options&quot;</span></span><br></pre></td></tr></table></figure>
<p>第 81 行使用<code>comment</code>标注了一行注释，注释内容为：<code>“Generic NAND options”</code>，这行注释在配置项<code> NAND_ARASAN</code> 的下面。<br>在配置项<code>“Configure Arasan Nand”</code>下面有一行注释，注释内容为<code>“*** Generic NAND options ***”</code>：<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/24.png" alt="image"></p>
<h1><span id="4-menuconfig-cai-dan-shi-zhan-lian-xi">4 menuconfig菜单实战练习</span><a href="#4-menuconfig-cai-dan-shi-zhan-lian-xi" class="header-anchor">#</a></h1><p>接下来自定义一个菜单进行练习，自定义菜单要求如下：<br>①、在主界面中添加一个名为<code>“My test menu”</code>，此菜单内部有一个配置项。<br>②、配置项为<code>“MY_TESTCONFIG”</code>，此配置项处于菜单<code>“My test menu”</code>中。<br>③、配置项的为变量类型为<code> bool</code>，默认值为 <code>y</code>。<br>④、配置项菜单名字为<code>“This is my test config”</code><br>⑤、配置项的帮助内容为<code>“This is a empty config, just for tset!”</code>。<br>在顶层 <code>Kconfig</code>，在最后面加入如下代码：</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1 menu <span class="string">&quot;My test menu&quot;</span></span><br><span class="line">2</span><br><span class="line">3 config MY_TESTCONFIG</span><br><span class="line">4 bool <span class="string">&quot;This is my test config&quot;</span></span><br><span class="line">5 default y</span><br><span class="line">6 help</span><br><span class="line">7 This is a empty config, just for test!</span><br><span class="line">8</span><br><span class="line">9 endmenu <span class="comment"># my test menu</span></span><br></pre></td></tr></table></figure>
<p>再次执行<code>make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- menuconfig</code>：<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/25.png" alt="image"><br>可以看出，主菜单最后面出现了一个名为<code>“My test menu”</code>的子菜单，这个就是上面添加进来的子菜单。进入此子菜单：<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/26.png" alt="image"><br>可以看出，配置项也添加成功，按H查看帮助信息：<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/27.png" alt="image"><br>保存退出，打开.config文件：<br><img src="/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/28.png" alt="image"><br>配置项<code>MY_TESTCONFIG</code>默认也是被选中的，因此在<code>.config </code>文件中肯定会有<code>“CONFIG_MY_TESTCONFIG=y”</code>这一行。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/06/23/uboot-menuconfig%E5%92%8CKconfig%E5%9B%BE%E5%83%8F%E5%8C%96%E9%85%8D%E7%BD%AE/" data-id="clyylnk8s00267wufapxp7aqn" data-title="uboot-menuconfig和Kconfig图像化配置" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/boot%E5%90%AF%E5%8A%A8/" rel="tag">boot启动</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux%E7%B3%BB%E7%BB%9F%E6%9E%84%E5%BB%BA/" rel="tag">linux系统构建</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/uboot/" rel="tag">uboot</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2024/06/24/Makefile-%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0%E5%92%8C%E9%80%9A%E7%94%A8%E6%A8%A1%E6%9D%BF/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Makefile-常用函数和通用模板
        
      </div>
    </a>
  
  
    <a href="/2024/06/23/uboot-bootm%E5%92%8Cbootz%E5%90%AF%E5%8A%A8%E5%86%85%E6%A0%B8/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">uboot-bootm和bootz启动内核</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8/" rel="tag">Linux设备驱动</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Makefile/" rel="tag">Makefile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/arm%E6%B1%87%E7%BC%96/" rel="tag">arm汇编</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/arm%E8%A3%B8%E6%9C%BA/" rel="tag">arm裸机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/boot%E5%90%AF%E5%8A%A8/" rel="tag">boot启动</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ini%E8%A7%A3%E6%9E%90/" rel="tag">ini解析</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" rel="tag">linux内存管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux%E5%86%85%E6%A0%B8/" rel="tag">linux内核</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" rel="tag">linux嵌入式环境搭建</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux%E7%B3%BB%E7%BB%9F%E6%9E%84%E5%BB%BA/" rel="tag">linux系统构建</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mipi%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" rel="tag">mipi图像处理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/uboot/" rel="tag">uboot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AD%E6%96%AD%E4%BD%93%E7%B3%BB/" rel="tag">中断体系</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81/" rel="tag">字符编码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%98%E5%82%A8%E9%A9%B1%E5%8A%A8/" rel="tag">存储驱动</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E6%BA%90%E6%8F%92%E4%BB%B6/" rel="tag">开源插件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%B6%E9%92%9F%E4%BD%93%E7%B3%BB/" rel="tag">时钟体系</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A3%B8%E6%9C%BA%E5%A4%96%E8%AE%BE%E9%A9%B1%E5%8A%A8/" rel="tag">裸机外设驱动</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/" rel="tag">通信协议</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Linux%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8/" style="font-size: 15px;">Linux设备驱动</a> <a href="/tags/Makefile/" style="font-size: 10px;">Makefile</a> <a href="/tags/arm%E6%B1%87%E7%BC%96/" style="font-size: 10px;">arm汇编</a> <a href="/tags/arm%E8%A3%B8%E6%9C%BA/" style="font-size: 19px;">arm裸机</a> <a href="/tags/boot%E5%90%AF%E5%8A%A8/" style="font-size: 17px;">boot启动</a> <a href="/tags/ini%E8%A7%A3%E6%9E%90/" style="font-size: 10px;">ini解析</a> <a href="/tags/linux%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" style="font-size: 10px;">linux内存管理</a> <a href="/tags/linux%E5%86%85%E6%A0%B8/" style="font-size: 16px;">linux内核</a> <a href="/tags/linux%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" style="font-size: 18px;">linux嵌入式环境搭建</a> <a href="/tags/linux%E7%B3%BB%E7%BB%9F%E6%9E%84%E5%BB%BA/" style="font-size: 20px;">linux系统构建</a> <a href="/tags/mipi%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" style="font-size: 12px;">mipi图像处理</a> <a href="/tags/uboot/" style="font-size: 15px;">uboot</a> <a href="/tags/%E4%B8%AD%E6%96%AD%E4%BD%93%E7%B3%BB/" style="font-size: 10px;">中断体系</a> <a href="/tags/%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81/" style="font-size: 10px;">字符编码</a> <a href="/tags/%E5%AD%98%E5%82%A8%E9%A9%B1%E5%8A%A8/" style="font-size: 11px;">存储驱动</a> <a href="/tags/%E5%BC%80%E6%BA%90%E6%8F%92%E4%BB%B6/" style="font-size: 12px;">开源插件</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 13px;">数据结构</a> <a href="/tags/%E6%97%B6%E9%92%9F%E4%BD%93%E7%B3%BB/" style="font-size: 10px;">时钟体系</a> <a href="/tags/%E8%A3%B8%E6%9C%BA%E5%A4%96%E8%AE%BE%E9%A9%B1%E5%8A%A8/" style="font-size: 17px;">裸机外设驱动</a> <a href="/tags/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/" style="font-size: 14px;">通信协议</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">July 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">June 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">May 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">April 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">March 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/07/30/%E5%AD%97%E7%AC%A6%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8-6-poll%E5%BA%95%E5%B1%82%E9%A9%B1%E5%8A%A8%E6%9C%BA%E5%88%B6/">字符设备驱动-6-poll底层驱动机制</a>
          </li>
        
          <li>
            <a href="/2024/07/30/%E5%AD%97%E7%AC%A6%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8-6-pre-%E4%BC%91%E7%9C%A0%E5%94%A4%E9%86%92%E6%9C%BA%E5%88%B6/">字符设备驱动-6-pre-休眠唤醒机制</a>
          </li>
        
          <li>
            <a href="/2024/07/28/%E5%AD%97%E7%AC%A6%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8-5-%E8%AE%BE%E5%A4%87%E6%A0%91%E5%87%BD%E6%95%B0/">字符设备驱动-5-设备树函数</a>
          </li>
        
          <li>
            <a href="/2024/07/28/%E5%AD%97%E7%AC%A6%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8-4-%E8%AE%BE%E5%A4%87%E6%A0%91/">字符设备驱动-4-设备树</a>
          </li>
        
          <li>
            <a href="/2024/07/28/%E5%AD%97%E7%AC%A6%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8-3-GPIO%E9%A9%B1%E5%8A%A8KEY%E7%A4%BA%E4%BE%8B/">字符设备驱动-3-GPIO驱动KEY示例</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>